<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<title>Orbit Breaker 3D</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0" />
<style>
html, body {
  margin: 0;
  padding: 0;
  overflow: hidden;
  background: #000;
  font-family: Arial, sans-serif;
  background-color: aqua;
}

#ui {
  position: fixed;
  top: 10px;
  left: 10px;
  color: #fff;
  background: rgba(0,0,0,0.6);
  padding: 10px 14px;
  border-radius: 8px;
  z-index: 10;
}

#center {
  position: fixed;
  top: 50%;
  left: 50%;
  transform: translate(-50%, -50%);
  color: white;
  font-size: 24px;
  text-align: center;
  display: none;
  z-index: 10;
}
</style>
</head>
<body>

<div id="ui">Score: <span id="score">0</span></div>
<div id="center">GAME OVER<br><small>Tap / Click to Restart</small></div>

<script src="https://cdn.jsdelivr.net/npm/three@0.160.0/build/three.min.js"></script>
<script>
console.log("Script start here")
/* =======================
   BASIC SETUP
======================= */
let scene, camera, renderer;
let planet, ship;
let obstacles = [];

const STATE = { PLAYING: 0, GAME_OVER: 1 };
let gameState = STATE.PLAYING;

let angle = 0;
let orbitRadius = 4;
let score = 0;
let spawnCounter = 0;

/* =======================
   INIT
======================= */
init();
animate();

console.log("Log has been added")

function init() {
  scene = new THREE.Scene();
  scene.background = new THREE.Color(0x050510);

  camera = new THREE.PerspectiveCamera(
    60,
    window.innerWidth / window.innerHeight,
    0.1,
    100
  );
  camera.position.set(0, 7, 10);
  camera.lookAt(0, 0, 0);

  renderer = new THREE.WebGLRenderer({ antialias: true });
  renderer.setSize(window.innerWidth, window.innerHeight);
  document.body.appendChild(renderer.domElement);

  // Lights
  scene.add(new THREE.AmbientLight(0x404040));
  const light = new THREE.PointLight(0xffffff, 1);
  light.position.set(6, 6, 6);
  scene.add(light);

  // Planet
  planet = new THREE.Mesh(
    new THREE.SphereGeometry(2, 32, 32),
    new THREE.MeshStandardMaterial({
      color: 0x2244ff,
      emissive: 0x112244
    })
  );
  scene.add(planet);

  // Ship
  ship = new THREE.Mesh(
    new THREE.ConeGeometry(0.25, 0.7, 10),
    new THREE.MeshStandardMaterial({ color: 0x00ffcc })
  );
  ship.rotation.x = Math.PI / 2;
  scene.add(ship);

  window.addEventListener("pointerdown", onInput);
  window.addEventListener("resize", onResize);
}

/* =======================
   INPUT
======================= */
function onInput() {
  if (gameState === STATE.GAME_OVER) {
    restartGame();
    return;
  }
  orbitRadius = orbitRadius === 4 ? 6 : 4;
}

/* =======================
   GAME LOOP
======================= */
function animate() {
  requestAnimationFrame(animate);

  if (gameState === STATE.PLAYING) {
    updateGame();
  }

  renderer.render(scene, camera);
}

function updateGame() {
  angle += 0.025;

  ship.position.set(
    Math.cos(angle) * orbitRadius,
    0,
    Math.sin(angle) * orbitRadius
  );
  ship.lookAt(0, 0, 0);

  spawnCounter++;
  if (spawnCounter > 50) {
    spawnObstacle();
    spawnCounter = 0;
  }

  for (let i = obstacles.length - 1; i >= 0; i--) {
    const o = obstacles[i];
    o.userData.angle += 0.02;
    o.position.x = Math.cos(o.userData.angle) * 8;
    o.position.z = Math.sin(o.userData.angle) * 8;

    if (o.position.distanceTo(ship.position) < 0.6) {
      endGame();
    }
  }

  score++;
  document.getElementById("score").innerText = score;
}

/* =======================
   OBSTACLES
======================= */
function spawnObstacle() {
  const box = new THREE.Mesh(
    new THREE.BoxGeometry(0.6, 0.6, 0.6),
    new THREE.MeshStandardMaterial({ color: 0xff4444 })
  );

  const a = Math.random() * Math.PI * 2;
  box.userData.angle = a;
  box.position.set(
    Math.cos(a) * 8,
    0,
    Math.sin(a) * 8
  );

  obstacles.push(box);
  scene.add(box);
}

/* =======================
   GAME STATE
======================= */
function endGame() {
  gameState = STATE.GAME_OVER;
  document.getElementById("center").style.display = "block";
}

function restartGame() {
  obstacles.forEach(o => scene.remove(o));
  obstacles = [];
  score = 0;
  angle = 0;
  orbitRadius = 4;
  spawnCounter = 0;
  gameState = STATE.PLAYING;
  document.getElementById("score").innerText = score;
  document.getElementById("center").style.display = "none";
}

/* =======================
   RESIZE WINDOW SIZE
======================= */
function onResize() {
  camera.aspect = window.innerWidth / window.innerHeight;
  camera.updateProjectionMatrix();
  renderer.setSize(window.innerWidth, window.innerHeight);
}


console.log("Script end here")
</script>
</body>
</html>
